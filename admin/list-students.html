<!DOCTYPE html>
<html lang="en">

<head>

    <!-- META ============================================= -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- OG -->
    <meta property="og:title" content="SeedSchool - Quản trị viên" />
    <meta name="format-detection" content="telephone=no">

    <!-- FAVICONS ICON ============================================= -->
    <link type="image/x-icon" href="assets/images/favicon.ico" rel="shortcut icon" />

    <!-- PAGE TITLE HERE ============================================= -->
    <title>Trang quản lý - Danh sách học sinh</title>

    <!-- MOBILE SPECIFIC ============================================= -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- All PLUGINS CSS ============================================= -->
    <link rel="stylesheet" type="text/css" href="assets/css/assets.css">

    <!-- STYLESHEETS ============================================= -->
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
    <link rel="stylesheet" type="text/css" href="assets/css/dashboard.css">
    <link rel="stylesheet" type="text/css" href="assets/css/shortcodes/dialog.css">
    <link rel="stylesheet" type="text/css" href="assets/css/jquery-ui.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/data-tables/css/dataTables.bootstrap4.min.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/data-tables/css/responsive.bootstrap4.min.css">
</head>

<body class=" ttr-opened-sidebar ttr-pinned-sidebar">

    <!-- header start -->
    <header class="ttr-header">
        <div class="ttr-header-wrapper">
            <!--sidebar menu toggler start -->
            <div class="ttr-toggle-sidebar ttr-material-button">
                <i class="ti-close ttr-open-icon"></i>
                <i class="ti-menu ttr-close-icon"></i>
            </div>
            <!--sidebar menu toggler end -->
            <!--logo start -->
            <div class="ttr-logo-box">
                <div>
                    <a href="admin-homepage.html" class="ttr-logo">
                        <img class="ttr-logo-mobile" alt="" src="assets/images/logo-mb.png" width="40" height="40">
                        <img class="ttr-logo-desktop" alt="" src="assets/images/logo-pc.png" width="170" height="40">
                    </a>
                </div>
            </div>
            <!--logo end -->

            <div class="ttr-header-right ttr-with-seperator">
                <!-- header right menu start -->
                <ul class="ttr-header-navigation">
                    <li id="greeting">
                        <a href="admin-index.html">
                        Xin chào, 
                        <span>Trần Văn Tuyến</span>
                    </a>
                    </li>
                    <li style="color: limegreen;">
                        <a>
                        Quản trị viên
                    </a>
                    </li>
                    <li>
                        <a href="#" class="ttr-material-button ttr-submenu-toggle"><span class="ttr-user-avatar"><img alt="" src="assets/images/testimonials/pic4.jpg" width="32" height="32"></span></a>
                        <div class="ttr-header-submenu">
                            <ul>
                                <li><a href="admin-index.html">Trang cá nhân</a></li>
                                <li><a href="change-info.html">Chỉnh sửa thông tin</a></li>
                                <li><a href="change-pass.html">Đổi mật khẩu</a></li>
                                <li><a href="../loginadmin.html ">Đăng xuất</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
                <!-- header right menu end -->
            </div>
            <!--header search panel start -->
            <div class="ttr-search-bar">
                <form class="ttr-search-form">
                    <div class="ttr-search-input-wrapper">
                        <input type="text" name="qq" placeholder="search something..." class="ttr-search-input">
                        <button type="submit" name="search" class="ttr-search-submit"><i class="ti-arrow-right"></i></button>
                    </div>
                    <span class="ttr-search-close ttr-search-toggle">
                    <i class="ti-close"></i>
                </span>
                </form>
            </div>
            <!--header search panel end -->
        </div>
    </header>
    <!-- header end -->
    <!-- Left sidebar menu start -->
    <div class="ttr-sidebar">
        <div class="ttr-sidebar-wrapper content-scroll">
            <!-- side menu logo start -->
            <div class="ttr-sidebar-logo">
                <span class="ttr-label">Trang quản lý</span>
                <div class="ttr-sidebar-toggle-button">
                    <i class="ti-arrow-left"></i>
                </div>
            </div>
            <!-- side menu logo end -->
            <!-- sidebar menu start -->
            <nav class="ttr-sidebar-navi">
                <ul>
                    <li>
                        <a href="admin-index.html" class="ttr-material-button">
                            <span class="ttr-icon"><i class="ti-user"></i></span>
                            <span class="ttr-label">Thông tin cá nhân</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="ttr-material-button">
                            <span class="ttr-icon"><i class="ti-list"></i></span>
                            <span class="ttr-label">Danh sách</span>
                            <span class="ttr-arrow-icon"><i class="fa fa-angle-down"></i></span>
                        </a>
                        <ul>
                            <li>
                                <a href="list-teachers.html" class="ttr-material-button"><span class="ttr-label">Danh sách giáo viên</span></a>
                            </li>
                            <li>
                                <a href="list-students.html" class="ttr-material-button"><span class="ttr-label">Danh sách học sinh</span></a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="statistical.html" class="ttr-material-button">
                            <span class="ttr-icon"><i class="ti-stats-up"></i></span>
                            <span class="ttr-label">Thống kê</span>
                        </a>
                    </li>
                    <li>
                        <a href="create-fee.html" class="ttr-material-button">
                            <span class="ttr-icon"><i class="ti-money"></i></span>
                            <span class="ttr-label">Thiết lập chi phí</span>
                        </a>
                    </li>
                    <li>
                        <a href="create-event.html" class="ttr-material-button">
                            <span class="ttr-icon"><i class="ti-car"></i></span>
                            <span class="ttr-label">Hoạt động ngoại khóa</span>
                        </a>
                    </li>
                    <li>
                        <a href="create-menu.html" class="ttr-material-button">
                            <span class="ttr-icon"><i class="ti-calendar"></i></span>
                            <span class="ttr-label">Lên thực đơn</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="ttr-material-button">
                            <span class="ttr-icon"><i class="ti-panel"></i></span>
                            <span class="ttr-label">Quản lý web</span>
                            <span class="ttr-arrow-icon"><i class="fa fa-angle-down"></i></span>
                        </a>
                        <ul>
                            <li>
                                <a href="post-articles.html" class="ttr-material-button"><span class="ttr-label">Đăng bài</span></a>
                            </li>
                            <li>
                                <a href="list-articles.html" class="ttr-material-button"><span class="ttr-label">Danh sách bài viết</span></a>
                            </li>
                            <li>
                                <a href="change-slideshow.html" class="ttr-material-button"><span class="ttr-label">Đổi ảnh slideshow</span></a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="#" class="ttr-material-button">
                            <span class="ttr-icon"><i class="ti-settings"></i></span>
                            <span class="ttr-label">Cài đặt</span>
                            <span class="ttr-arrow-icon"><i class="fa fa-angle-down"></i></span>
                        </a>
                        <ul>
                            <li>
                                <a href="change-info.html" class="ttr-material-button"><span class="ttr-label">Chỉnh sửa thông tin</a>
                            </li>
                            <li>
                                <a href="change-pass.html" class="ttr-material-button"><span class="ttr-label">Đổi mật khẩu</span></a>
                            </li>
                        </ul>
                    </li>
                    <li class="ttr-seperate"></li>
                </ul>
                <!-- sidebar menu end -->
            </nav>
            <!-- sidebar menu end -->
        </div>
    </div>
    <!-- Left sidebar menu end -->

    <!--Main container start -->
    <main class="ttr-wrapper">
        <div class="container-fluid">
            <div class="db-breadcrumb">
                <h4 class="breadcrumb-title">Danh sách học sinh</h4>
                <ul class="db-breadcrumb-list">
                    <li><i class="fa fa-home"></i>Trang quản lý</li>
                    <li>Danh sách</li>
                    <li>Danh sách học sinh</li>
                </ul>
            </div>
            <!-- Card -->
            <div class="row">
                <!-- Your Profile Views Chart -->
                <div class="col-12 m-b30" style="margin: auto">
                    <div class="widget-box">
                        <div class="wc-title">
                            <h4>Danh sách học sinh</h4>
                        </div>
                        <div class="widget-inner">

                            <table id="student-table" class="table table-striped table-bordered table-sm display responsive nowrap" width="100%" style="border: 1px solid gray">
                                <thead class="thead-dark">
                                    <tr>
                                        <th data-priority="1" class="text-center">Họ và tên</th>
                                        <th data-priority="3">Mã số HS</th>
                                        <th data-priority="4">Lớp</th>
                                        <th class="none">Giới tính</th>
                                        <th class="none">Ngày sinh</th>
                                        <th data-priority="6">Ngày nhập học</th>
                                        <th data-priority="5">SĐT phụ huynh</th>
                                        <th data-priority="2">Tài khoản Seed</th>
                                    </tr>
                                </thead>
                                <tbody id="student-table-body">
                        
                                </tbody>
                            </table>

                        </div>
                    </div>
                </div>
                <!-- Your Profile Views Chart END-->
            </div>
        </div>
    </main>
    <div class="ttr-overlay"></div>
    <!-- External JavaScripts -->
    
    <script src="assets/js/jquery-3.6.0.js"></script>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/jquery-ui.js"></script>
    <script src="assets/vendors/bootstrap/js/popper.min.js"></script>
    <script src="assets/vendors/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/vendors/bootstrap-select/bootstrap-select.min.js"></script>
    <script src="assets/vendors/bootstrap-touchspin/jquery.bootstrap-touchspin.js"></script>
    <script src="assets/vendors/data-tables/js/jquery.dataTables.min.js"></script>
    <script src="assets/vendors/data-tables/js/dataTables.bootstrap4.min.js"></script>
    <script src="assets/vendors/data-tables/js/dataTables.responsive.min.js"></script>
    <script src="assets/vendors/data-tables/js/responsive.bootstrap4.min.js"></script>
    <script src="assets/js/admin.js"></script>
    <script src="assets/js//catchbutton.js"></script>


    </script>
    <script>
        $(document).ready(function() {
            $('#student-table').dataTable({
                responsive: true,
                "language": {
                    "sProcessing": "Đang xử lý...",
                    "sLengthMenu": "Xem _MENU_ mục",
                    "sZeroRecords": "Không có mục nào phù hợp",
                    "sInfo": "Mục _START_-_END_ trong tổng _TOTAL_ mục",
                    "sInfoEmpty": "Mục 0-0 trong tổng 0 mục",
                    "sInfoFiltered": "(lọc từ _MAX_ mục)",
                    "sInfoPostFix": "",
                    "sSearch": "Tìm kiếm:",
                    "sUrl": "",
                    "oPaginate": {
                        "sFirst": "Đầu",
                        "sPrevious": "Trước",
                        "sNext": "Tiếp",
                        "sLast": "Cuối"
                    }
                },
                "processing": true,
                "aLengthMenu": [
                    [10, 20, 50, 100],
                    [10, 20, 50, 100]
                ],
                "order": [
                    [2, 'asc']
                ]
            });
        }); 

        const bodyTable = document.getElementById("student-table-body")
        const tokenAdmin = localStorage.getItem("tokenAdmin");
        async function getStudents() {
            try {
                const resp = await fetch("https://seedschool.herokuapp.com/api/v1/student/?page-number=0&page-size=10&sort-by=%2Bid", {
                    headers: {
                        Authorization: tokenAdmin,
                        "Content-type": "application/json; charset=UTF-8",
                    }
                })
                const data = await resp.json();
                console.log(data)
                bodyTable.innerHTML=data.map(student => (
                        `
                        <tr>
                            <td>${student.name}</td>
                            <td>${student.id}</td>
                            <td>M3A</td>
                            <td>${student.birthday}</td>
                            <td>${student.phoneNumber}</td>
                            <td><a href="">default</a></td>
                        </tr>
                        `
                    )).join("")
                
            } catch (error) {
                    console.log(error)
                }
            }
            getStudents()
    </script>
</body>

</html>